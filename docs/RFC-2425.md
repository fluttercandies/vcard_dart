# RFC 2425 - A MIME Content-Type for Directory Information

> **Status**: PROPOSED STANDARD (Obsoleted by RFC 6350)  
> **Authors**: T. Howes, M. Smith, F. Dawson  
> **Date**: September 1998  
> **Foundation for**: vCard 3.0 (RFC 2426), later superseded by vCard 4.0 (RFC 6350)

---

## 1. Overview

RFC 2425 defines the `text/directory` MIME Content-Type for holding directory information in a simple "type:value" form. It establishes the framework that vCard builds upon.

### Key Concepts

- **Content-Type**: `text/directory`
- **Required Parameter**: `charset` (default UTF-8 preferred)
- **Optional Parameter**: `profile` (e.g., "vCard")
- **Default Encoding**: 8bit

---

## 2. Line Delimiting and Folding

### Line Delimiter
- Lines are delimited by **CRLF** (ASCII decimal 13 + 10)

### Line Folding Rules

**Folding (Generating)**:
- Lines longer than **75 characters** SHOULD be folded
- Folding: insert CRLF followed by a single whitespace (SPACE or HTAB)
- At least one character must be present on the folded line

**Unfolding (Parsing)**:
- CRLF immediately followed by whitespace is removed (ignored)
- Process unfolding BEFORE parsing property values

### Folding Example

Original:
```
DESCRIPTION:This is a long description that exists on a long line.
```

Folded:
```
DESCRIPTION:This is a long description
  that exists on a long line.
```

Or even:
```
DESCRIPTION:This is a long descrip
 tion that exists o
  n a long line.
```

---

## 3. ABNF Content-Type Definition

### Basic Content Line Structure

```abnf
contentline  = [group "."] name *(";" param) ":" value CRLF

group        = 1*(ALPHA / DIGIT / "-")

name         = x-name / iana-token

iana-token   = 1*(ALPHA / DIGIT / "-")

x-name       = "x-" 1*(ALPHA / DIGIT / "-")
             ; Experimental/bilateral use

param        = param-name "=" param-value *("," param-value)

param-name   = x-name / iana-token

param-value  = ptext / quoted-string

ptext        = *SAFE-CHAR

value        = *VALUE-CHAR / valuespec

quoted-string = DQUOTE *QSAFE-CHAR DQUOTE
```

### Character Sets

```abnf
NON-ASCII    = %x80-FF
             ; Restricted by charset parameter

QSAFE-CHAR   = WSP / %x21 / %x23-7E / NON-ASCII
             ; Any character except CTLs, DQUOTE

SAFE-CHAR    = WSP / %x21 / %x23-2B / %x2D-39 / %x3C-7E / NON-ASCII
             ; Any character except CTLs, DQUOTE, ";", ":", ","

VALUE-CHAR   = WSP / VCHAR / NON-ASCII
             ; Any textual character
```

---

## 4. Pre-defined Parameters

### 4.1 ENCODING Parameter

```abnf
encodingparm = "encoding" "=" encodingtype

encodingtype = "b"           ; Base64 encoding
             / iana-token    ; Other registered encodings
```

- **"b" encoding**: Base64 encoding for binary values
- Can be used per-value while Content-Transfer-Encoding applies to whole body

### 4.2 VALUE Parameter (Value Type)

```abnf
valuetypeparm = "value" "=" valuetype

valuetype = "uri"
          / "text"
          / "date"
          / "time"
          / "date-time"
          / "integer"
          / "boolean"
          / "float"
          / x-name
          / iana-token
```

### 4.3 LANGUAGE Parameter

```abnf
languageparm = "language" "=" Language-Tag
             ; Language-Tag as defined in RFC 1766
```

- Identifies the language of the value
- No concept of "default" language except Content-Language header

### 4.4 CONTEXT Parameter

```abnf
contextparm = "context" "=" context

context = x-name / iana-token
```

- Identifies protocol context for interpreting the value
- Used primarily with SOURCE type

---

## 5. Pre-defined Value Types

### 5.1 TEXT Value Type

```abnf
text-list = *TEXT-LIST-CHAR *("," *TEXT-LIST-CHAR)

TEXT-LIST-CHAR = "\\" / "\," / "\n"
               / <any VALUE-CHAR except , or \ or newline>
```

**Escaping Rules**:
- Backslash (`\`) → `\\`
- Comma (`,`) → `\,`
- Newline → `\n` or `\N`

**Example**:
```
DESCRIPTION:Mythical Manager\nHyjinx Software Division\n
 BabsCo\, Inc.\n
```

### 5.2 URI Value Type

- Uses URI format as defined in RFC 1738
- Can reference external content via Content-ID URI

**Example**:
```
http://www.foobar.com/my/picture.jpg
ldap://ldap.foobar.com/cn=babs%20jensen
```

### 5.3 DATE Value Type

Based on ISO 8601 subset:

```abnf
date = date-fullyear ["-"] date-month ["-"] date-mday

date-fullyear = 4DIGIT
date-month    = 2DIGIT   ; 01-12
date-mday     = 2DIGIT   ; 01-31
```

**Examples**:
```
1985-04-12
1996-08-05,1996-11-11
19850412
```

### 5.4 TIME Value Type

```abnf
time = time-hour [":"] time-minute [":"] time-second [time-secfrac]
       [time-zone]

time-hour    = 2DIGIT   ; 00-23
time-minute  = 2DIGIT   ; 00-59
time-second  = 2DIGIT   ; 00-60 (leap second)
time-secfrac = "," 1*DIGIT
time-zone    = "Z" / time-numzone
time-numzone = sign time-hour [":"] time-minute
```

**Examples**:
```
10:22:00
102200
10:22:00.33
10:22:00.33Z
10:22:00-08:00
```

### 5.5 DATE-TIME Value Type

```abnf
date-time-list = date "T" time *("," date "T" time)
```

**Examples**:
```
1996-10-22T14:00:00Z
1996-08-11T12:34:56Z
19960811T123456Z
```

### 5.6 BOOLEAN Value Type

```abnf
boolean = "TRUE" / "FALSE"
```

- Case insensitive

### 5.7 INTEGER Value Type

```abnf
integer-list = integer *("," integer)
integer = [sign] 1*DIGIT
sign = "+" / "-"
```

**Examples**:
```
1234567890
-1234556790
+1234556790,432109876
```

### 5.8 FLOAT Value Type

```abnf
float-list = float *("," float)
float = [sign] 1*DIGIT ["." 1*DIGIT]
```

**Examples**:
```
20.30
1000000.0000001
1.333,3.14
```

---

## 6. Predefined Types

### 6.1 SOURCE Type

- **Purpose**: Identify source of directory information
- **Encoding**: 8bit
- **Value Type**: uri

**Example**:
```
SOURCE;CONTEXT=LDAP:ldap://ldap.host/cn=Babs%20Jensen,
 %20o=Babsco,%20c=US
```

### 6.2 NAME Type

- **Purpose**: Displayable name of directory entity
- **Encoding**: 8bit
- **Value Type**: text

**Example**:
```
NAME:Babs Jensen's Contact Information
```

### 6.3 PROFILE Type

- **Purpose**: Identify type of directory entity
- **Encoding**: 8bit
- **Value Type**: profile name

**Example**:
```
PROFILE:vCard
```

### 6.4 BEGIN Type

- **Purpose**: Denote beginning of syntactic entity
- **Encoding**: 8bit
- **Value Type**: text (profile name)

**Example**:
```
BEGIN:VCARD
```

### 6.5 END Type

- **Purpose**: Denote end of syntactic entity
- **Encoding**: 8bit
- **Value Type**: text (profile name)

**Example**:
```
END:VCARD
```

---

## 7. Grouping

### Group Construct

- Properties can be grouped using a prefix: `group.TYPENAME`
- Group name is syntactic convention for display grouping
- Implementations not supporting grouping may strip prefix

**Example**:
```
home.tel;type=fax,voice,msg:+49 3581 123456
home.label:Hufenshlagel 1234\n
 02828 Goerlitz\n
 Deutschland
```

---

## 8. Case Sensitivity Rules

| Element | Case Sensitivity |
|---------|-----------------|
| Type names | Case insensitive (FN = fn = Fn) |
| Parameter names | Case insensitive |
| Parameter values | Depends on definition |
| Group names | Case insensitive |

---

## 9. Multi-Valued Properties

Two approaches:

1. **Multiple content lines**: Create new line for each value
2. **Comma-separated**: Encode multiple values in single line (if type supports)

**Example (comma-separated dates)**:
```
date:1996-08-05,1996-11-11
```

---

## 10. Complete vCard Example

```
Content-Type: text/directory;
 charset="iso-8859-1";
 profile="vCard"
Content-ID: <id3@host.com>
Content-Transfer-Encoding: Quoted-Printable

begin:VCARD
source:ldap://cn=bjorn%20Jensen, o=university%20of%20Michigan, c=US
name:Bjorn Jensen
fn:Bj=F8rn Jensen
n:Jensen;Bj=F8rn
email;type=internet:bjorn@umich.edu
tel;type=work,voice,msg:+1 313 747-4454
key;type=x509;encoding=B:dGhpcyBjb3VsZCBiZSAKbXkgY2VydGlmaWNhdGUK
end:VCARD
```

---

## 11. Relationship to Other Standards

| Standard | Relationship |
|----------|-------------|
| RFC 2426 | vCard 3.0 - profiles this framework |
| RFC 6350 | vCard 4.0 - obsoletes RFC 2425 and RFC 2426 |
| RFC 2045/2046 | MIME - base encoding framework |
| RFC 2112 | multipart/related - for complex content |
| ISO 8601 | Date/time formats |

---

## 12. Key Implementation Notes

1. **Always unfold lines before parsing**
2. **Type and parameter names are case insensitive**
3. **Handle multiple values per type (comma-separated or multiple lines)**
4. **Escape special characters in text values**
5. **Support both basic and extended ISO 8601 date formats**
6. **Binary data uses "b" (Base64) encoding parameter**
7. **Group prefixes can be stripped if not understood**
