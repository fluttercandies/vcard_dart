# RFC 4770 - vCard Extensions for Instant Messaging (IM)

> **RFC 4770**: vCard Extensions for Instant Messaging (IM)  
> **Status**: Proposed Standard (Obsoleted by RFC 6350)  
> **Date**: January 2007  
> **Authors**: C. Jennings (Cisco Systems), J. Reschke (greenbytes)

## 1. Overview

RFC 4770 defines an extension to vCard (RFC 2425/2426) for representing Instant Messaging (IM) and Presence Protocol (PP) contact information using a new **IMPP** property type.

**Note**: This RFC has been **obsoleted by RFC 6350** (vCard 4.0), which incorporates IMPP directly into the vCard specification.

## 2. IMPP Property Definition

### 2.1 Property Registration

| Attribute | Value |
|-----------|-------|
| **Type name** | IMPP |
| **Purpose** | Specify URI for instant messaging and presence protocol communications |
| **Encoding** | 8bit |
| **Value type** | Single URI |
| **Intended usage** | COMMON |

### 2.2 Property Characteristics

- Each IMPP entry contains **exactly one URI**
- A vCard may have **multiple IMPP entries**
- Each entry can have **multiple parameters**
- Any combination of parameters is valid
- Each parameter should occur **at most once** per entry

### 2.3 URI Protocol Indication

The URI scheme indicates the protocol to use:

| URI Scheme | Protocol/Service |
|------------|------------------|
| `sip:` | SIP/SIMPLE |
| `xmpp:` | XMPP (Jabber) |
| `irc:` | IRC |
| `ymsgr:` | Yahoo Messenger |
| `msn:` | Microsoft Messenger |
| `aim:` | AOL Instant Messenger |
| `im:` | CPIM gateway |
| `pres:` | CPP gateway |

## 3. TYPE Parameter

### 3.1 Parameter Values

The IMPP property supports a `TYPE` parameter with the following values:

#### Communication Type
| Value | Description |
|-------|-------------|
| `PERSONAL` | Personal communications |
| `BUSINESS` | Business communications |

#### Location Type
| Value | Description |
|-------|-------------|
| `HOME` | Home device/address |
| `WORK` | Work device/address |
| `MOBILE` | Mobile device |

#### Preference
| Value | Description |
|-------|-------------|
| `PREF` | Preferred address (same semantics as TEL PREF) |

### 3.2 Extensibility

Additional values allowed:
- `iana-token` - IANA registered tokens
- `x-name` - Extension tokens (X- prefix)

**Note**: Values are **case insensitive**.

## 4. Formal Grammar (ABNF)

```abnf
; For name="IMPP"
param      = impp-param     ; Only IMPP parameters allowed

value      = URI            ; URI defined in RFC 3986 Section 3

impp-param = "TYPE" "=" impp-type *("," impp-type)

impp-type  = "PERSONAL" / "BUSINESS" /    ; purpose of communications
             "HOME" / "WORK" / "MOBILE" /  ; location
             "PREF" /                       ; preference
             iana-token / x-name            ; extensions
             ; Values are case insensitive
```

## 5. Examples

### 5.1 Basic Example

```
BEGIN:vCard
VERSION:3.0
FN:Alice Doe
IMPP;TYPE=personal,pref:im:alice@example.com
END:vCard
```

### 5.2 Multiple IMPP Entries

```
BEGIN:vCard
VERSION:3.0
FN:John Smith
IMPP;TYPE=work,pref:sip:john.smith@company.com
IMPP;TYPE=personal:xmpp:johnsmith@jabber.org
IMPP;TYPE=mobile:ymsgr:jsmith_mobile
END:vCard
```

### 5.3 Various Protocol Examples

```
BEGIN:vCard
VERSION:3.0
FN:Jane Doe
IMPP;TYPE=business:sip:jane@sip.example.com
IMPP;TYPE=personal,home:xmpp:jane@xmpp.example.com
IMPP;TYPE=personal:aim:janedoe123
IMPP;TYPE=work:msn:jane.doe@company.com
END:vCard
```

## 6. Relationship to Other Standards

### 6.1 Normative References

| RFC | Title | Relevance |
|-----|-------|-----------|
| RFC 2425 | MIME Content-Type for Directory Information | Base vCard framework |
| RFC 2426 | vCard MIME Directory Profile | vCard 3.0 specification |
| RFC 3986 | Uniform Resource Identifier (URI) | URI syntax |
| RFC 4234 | Augmented BNF for Syntax Specifications | Grammar notation |

### 6.2 Informational References

| RFC | Title | Protocol |
|-----|-------|----------|
| RFC 3261 | SIP: Session Initiation Protocol | sip: URI |
| RFC 4622 | IRIs and URIs for XMPP | xmpp: URI |
| RFC 3860 | Common Profile for Instant Messaging (CPIM) | im: URI |
| RFC 3859 | Common Profile for Presence (CPP) | pres: URI |

### 6.3 Obsoleted By

RFC 4770 was **obsoleted by RFC 6350** (vCard 4.0), which:
- Incorporates IMPP property directly
- Adds additional capabilities
- Uses different parameter syntax (e.g., `PREF=1` instead of `TYPE=PREF`)

## 7. Security Considerations

1. **Privacy Sensitivity**: Presence information is often considered more sensitive than other address information
2. **Storage/Transfer**: Systems handling vCards must carefully consider privacy implications
3. **No Additional Issues**: Beyond standard vCard security considerations

## 8. vCard 3.0 vs vCard 4.0 IMPP

### 8.1 Syntax Differences

| Feature | vCard 3.0 (RFC 4770) | vCard 4.0 (RFC 6350) |
|---------|----------------------|----------------------|
| TYPE values | PERSONAL, BUSINESS, HOME, WORK, MOBILE | home, work (lowercase) |
| Preference | TYPE=PREF | PREF=1 (numeric) |
| Parameter separator | Semicolon | Semicolon |
| Value | URI | URI |

### 8.2 Example Comparison

**vCard 3.0**:
```
IMPP;TYPE=work,pref:xmpp:user@example.com
```

**vCard 4.0**:
```
IMPP;TYPE=work;PREF=1:xmpp:user@example.com
```

## 9. Implementation Notes

### 9.1 URI Handling

- The URI scheme indicates the communication protocol
- Implementations should recognize common schemes (sip, xmpp, aim, etc.)
- Unknown schemes should be preserved but may not be actionable

### 9.2 Multiple Values

- Multiple IMPP properties allowed in single vCard
- Each IMPP contains exactly one URI
- Use PREF to indicate preferred contact method

### 9.3 Parameter Handling

- TYPE parameter can have multiple comma-separated values
- Each parameter should appear at most once per IMPP entry
- Values are case-insensitive

### 9.4 Backward Compatibility

- IMPP is an extension to vCard 3.0
- Older vCard parsers may ignore unknown property types
- Should be preserved during round-trip processing

## 10. Summary

RFC 4770 provides a standardized way to include instant messaging contact information in vCards:

| Feature | Description |
|---------|-------------|
| Property | IMPP |
| Value | Single URI with protocol-specific scheme |
| Parameters | TYPE (PERSONAL, BUSINESS, HOME, WORK, MOBILE, PREF) |
| Multiple | Yes, multiple IMPP properties per vCard |
| Protocols | SIP, XMPP, IRC, Yahoo, MSN, AIM, CPIM, CPP |

This extension was incorporated into vCard 4.0 (RFC 6350), making IMPP a first-class vCard property.
