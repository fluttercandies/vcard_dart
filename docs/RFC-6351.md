# RFC 6351 - xCard: vCard XML Representation

> **Status**: PROPOSED STANDARD  
> **Author**: S. Perreault (Viagenie)  
> **Date**: August 2011  
> **Updated by**: RFC 6868  
> **MIME Type**: `application/vcard+xml`  
> **XML Namespace**: `urn:ietf:params:xml:ns:vcard-4.0`

---

## 1. Overview

RFC 6351 defines xCard, an XML representation for vCard data. It provides a 1-to-1 mapping between plain vCard format and XML, enabling use of XML parsers and tools.

### Key Design Goals

- **1-to-1 mapping**: Complete preservation of vCard data semantics
- **XML engine reuse**: Leverage existing XML tools and parsers
- **Round-tripping**: Convert vCard ↔ xCard without data loss
- **Extensibility**: Support new properties via XML namespaces

---

## 2. XML Structure

### Root Element

```xml
<?xml version="1.0" encoding="UTF-8"?>
<vcards xmlns="urn:ietf:params:xml:ns:vcard-4.0">
  <vcard>
    <!-- properties here -->
  </vcard>
</vcards>
```

- `<vcards>` is always the root element (even for single vCard)
- Contains one or more `<vcard>` elements
- Each `<vcard>` contains property elements

### Property Elements

Properties are lowercase XML elements:

```xml
<fn><text>John Doe</text></fn>
<tel><uri>tel:+1-555-1234</uri></tel>
```

### Parameter Elements

Parameters are inside a `<parameters>` element:

```xml
<tel>
  <parameters>
    <type>
      <text>work</text>
      <text>voice</text>
    </type>
    <pref><integer>1</integer></pref>
  </parameters>
  <uri>tel:+1-555-1234</uri>
</tel>
```

---

## 3. Value Type Elements

### 3.1 Text

```xml
<text>value</text>
```

### 3.2 URI

```xml
<uri>https://example.com</uri>
```

### 3.3 Date

Pattern: `\d{8}|\d{4}-\d\d|--\d\d(\d\d)?|---\d\d`

```xml
<date>19850412</date>
<date>--0203</date>
```

### 3.4 Time

Pattern: `(\d\d(\d\d(\d\d)?)?|-\d\d(\d\d?)|--\d\d)(Z|[+\-]\d\d(\d\d)?)?`

```xml
<time>143000</time>
<time>1430-0500</time>
```

### 3.5 Date-Time

Pattern: `(\d{8}|--\d{4}|---\d\d)T\d\d(\d\d(\d\d)?)?(Z|[+\-]\d\d(\d\d)?)?`

```xml
<date-time>20090808T1430-0500</date-time>
```

### 3.6 Timestamp

Pattern: `\d{8}T\d{6}(Z|[+\-]\d\d(\d\d)?)?`

```xml
<timestamp>20130214T123000Z</timestamp>
```

### 3.7 Boolean

```xml
<boolean>true</boolean>
<boolean>false</boolean>
```

### 3.8 Integer

```xml
<integer>42</integer>
```

### 3.9 Float

```xml
<float>3.14</float>
```

### 3.10 UTC Offset

Pattern: `[+\-]\d\d(\d\d)?`

```xml
<utc-offset>-0500</utc-offset>
```

### 3.11 Language Tag

```xml
<language-tag>en</language-tag>
<language-tag>fr-CA</language-tag>
```

---

## 4. Parameter Elements

### 4.1 LANGUAGE

```xml
<language><language-tag>fr</language-tag></language>
```

### 4.2 PREF

```xml
<pref><integer>1</integer></pref>
```

Valid range: 1-100

### 4.3 ALTID

```xml
<altid><text>1</text></altid>
```

### 4.4 PID

```xml
<pid><text>1.0</text></pid>
```

### 4.5 TYPE

```xml
<type>
  <text>work</text>
  <text>voice</text>
</type>
```

### 4.6 MEDIATYPE

```xml
<mediatype><text>image/jpeg</text></mediatype>
```

### 4.7 CALSCALE

```xml
<calscale><text>gregorian</text></calscale>
```

### 4.8 SORT-AS

```xml
<sort-as>
  <text>Harten</text>
  <text>Rene</text>
</sort-as>
```

### 4.9 GEO (parameter)

```xml
<geo><uri>geo:37.386,-122.082</uri></geo>
```

### 4.10 TZ (parameter)

```xml
<tz><text>America/New_York</text></tz>
```

### 4.11 LABEL

```xml
<label><text>123 Main St\nCity, ST 12345</text></label>
```

---

## 5. Property Definitions

### 5.1 Identification Properties

**FN (Formatted Name)**:
```xml
<fn><text>John Doe</text></fn>
```

**N (Structured Name)**:
```xml
<n>
  <surname>Doe</surname>
  <given>John</given>
  <additional>Q</additional>
  <prefix>Mr.</prefix>
  <suffix>Jr.</suffix>
</n>
```

**NICKNAME**:
```xml
<nickname><text>Johnny</text></nickname>
```

**PHOTO**:
```xml
<photo><uri>https://example.com/photo.jpg</uri></photo>
```

**BDAY**:
```xml
<bday><date>19850415</date></bday>
<bday><text>circa 1985</text></bday>
```

**ANNIVERSARY**:
```xml
<anniversary><date-time>20100612T150000</date-time></anniversary>
```

**GENDER**:
```xml
<gender>
  <sex>M</sex>
  <identity>male</identity>
</gender>
```

Valid sex values: "", "M", "F", "O", "N", "U"

### 5.2 Delivery Address

**ADR**:
```xml
<adr>
  <parameters>
    <type><text>work</text></type>
    <label><text>123 Main St\nCity, ST 12345</text></label>
  </parameters>
  <pobox/>
  <ext>Suite 100</ext>
  <street>123 Main St</street>
  <locality>City</locality>
  <region>ST</region>
  <code>12345</code>
  <country>USA</country>
</adr>
```

### 5.3 Communications

**TEL**:
```xml
<tel>
  <parameters>
    <type>
      <text>work</text>
      <text>voice</text>
    </type>
  </parameters>
  <uri>tel:+1-555-1234;ext=102</uri>
</tel>
```

**EMAIL**:
```xml
<email><text>john@example.com</text></email>
```

**IMPP**:
```xml
<impp><uri>xmpp:john@example.com</uri></impp>
```

**LANG**:
```xml
<lang>
  <parameters><pref><integer>1</integer></pref></parameters>
  <language-tag>en</language-tag>
</lang>
```

### 5.4 Geographic

**TZ**:
```xml
<tz><text>America/New_York</text></tz>
<tz><utc-offset>-0500</utc-offset></tz>
```

**GEO**:
```xml
<geo><uri>geo:37.386,-122.082</uri></geo>
```

### 5.5 Organizational

**TITLE**:
```xml
<title><text>Software Engineer</text></title>
```

**ROLE**:
```xml
<role><text>Developer</text></role>
```

**LOGO**:
```xml
<logo><uri>https://example.com/logo.png</uri></logo>
```

**ORG**:
```xml
<org>
  <text>Company Name</text>
  <text>Department</text>
</org>
```

**MEMBER**:
```xml
<member><uri>urn:uuid:550e8400-e29b-41d4-a716-446655440000</uri></member>
```

**RELATED**:
```xml
<related>
  <parameters>
    <type><text>friend</text></type>
  </parameters>
  <uri>urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6</uri>
</related>
```

### 5.6 Explanatory

**CATEGORIES**:
```xml
<categories>
  <text>friends</text>
  <text>family</text>
</categories>
```

**NOTE**:
```xml
<note><text>This is a note</text></note>
```

**PRODID**:
```xml
<prodid><text>-//Example Corp//Product//EN</text></prodid>
```

**REV**:
```xml
<rev><timestamp>20130214T123000Z</timestamp></rev>
```

**SOUND**:
```xml
<sound><uri>https://example.com/name.wav</uri></sound>
```

**UID**:
```xml
<uid><uri>urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6</uri></uid>
```

**CLIENTPIDMAP**:
```xml
<clientpidmap>
  <sourceid>1</sourceid>
  <uri>urn:uuid:...</uri>
</clientpidmap>
```

**URL**:
```xml
<url><uri>https://example.com</uri></url>
```

### 5.7 Security

**KEY**:
```xml
<key><uri>data:application/pgp-keys;base64,...</uri></key>
<key><text>-----BEGIN PGP PUBLIC KEY BLOCK-----...</text></key>
```

### 5.8 Calendar

**FBURL**:
```xml
<fburl><uri>https://example.com/fb/john</uri></fburl>
```

**CALADRURI**:
```xml
<caladruri><uri>mailto:john@example.com</uri></caladruri>
```

**CALURI**:
```xml
<caluri><uri>https://example.com/cal/john</uri></caluri>
```

---

## 6. Grouping

Groups are represented with `<group>` element:

```xml
<vcards xmlns="urn:ietf:params:xml:ns:vcard-4.0">
  <vcard>
    <group name="contact">
      <fn><text>John Doe</text></fn>
      <email><text>john@example.com</text></email>
    </group>
    <group name="media">
      <photo><uri>...</uri></photo>
    </group>
  </vcard>
</vcards>
```

Equivalent vCard:
```
BEGIN:VCARD
VERSION:4.0
contact.FN:John Doe
contact.EMAIL:john@example.com
media.PHOTO:...
END:VCARD
```

---

## 7. Extensions

### X- Extensions

```xml
<x-my-prop>
  <parameters>
    <pref><integer>1</integer></pref>
  </parameters>
  <text>value</text>
</x-my-prop>
```

### Namespace Extensions

```xml
<ext:my-prop xmlns:ext="http://example.com/extensions">
  <parameters>
    <pref><integer>1</integer></pref>
  </parameters>
  <text>value</text>
</ext:my-prop>
```

### Unknown Value Type

For unknown properties:
```xml
<x-unknown-prop>
  <unknown>raw value text</unknown>
</x-unknown-prop>
```

---

## 8. Conversion Rules

### vCard → xCard

1. **Unfold lines** first
2. **Property names → lowercase** XML elements
3. **Parameter names → lowercase** XML elements
4. **Unescape vCard escaping** (`\n` → newline)
5. **Unescape parameter quoting**
6. **Unknown properties** use `<unknown>` value type
7. **XML property** content copied as-is

### xCard → vCard

1. **Property names → uppercase**
2. **Parameter names → uppercase**
3. **Apply vCard escaping** (newline → `\n`)
4. **Apply parameter quoting** as needed
5. **`<unknown>` values** → no VALUE parameter
6. **Fold long lines** (SHOULD fold)

---

## 9. VERSION Property

- **NOT present** in xCard
- Version indicated by namespace: `urn:ietf:params:xml:ns:vcard-4.0`
- Future vCard versions will use different namespaces

---

## 10. Complete Example

### vCard

```
BEGIN:VCARD
VERSION:4.0
FN:Simon Perreault
N:Perreault;Simon;;;ing. jr,M.Sc.
BDAY:--0203
ANNIVERSARY:20090808T1430-0500
GENDER:M
LANG;PREF=1:fr
LANG;PREF=2:en
ORG;TYPE=work:Viagenie
ADR;TYPE=work:;Suite D2-630;2875 Laurier;Quebec;QC;G1V 2M2;Canada
TEL;VALUE=uri;TYPE="work,voice";PREF=1:tel:+1-418-656-9254;ext=102
EMAIL;TYPE=work:simon.perreault@viagenie.ca
GEO;TYPE=work:geo:46.766336,-71.28955
TZ:America/Montreal
URL;TYPE=home:http://nomis80.org
END:VCARD
```

### xCard

```xml
<?xml version="1.0" encoding="UTF-8"?>
<vcards xmlns="urn:ietf:params:xml:ns:vcard-4.0">
  <vcard>
    <fn><text>Simon Perreault</text></fn>
    <n>
      <surname>Perreault</surname>
      <given>Simon</given>
      <additional/>
      <prefix/>
      <suffix>ing. jr</suffix>
      <suffix>M.Sc.</suffix>
    </n>
    <bday><date>--0203</date></bday>
    <anniversary><date-time>20090808T1430-0500</date-time></anniversary>
    <gender><sex>M</sex></gender>
    <lang>
      <parameters><pref><integer>1</integer></pref></parameters>
      <language-tag>fr</language-tag>
    </lang>
    <lang>
      <parameters><pref><integer>2</integer></pref></parameters>
      <language-tag>en</language-tag>
    </lang>
    <org>
      <parameters><type><text>work</text></type></parameters>
      <text>Viagenie</text>
    </org>
    <adr>
      <parameters>
        <type><text>work</text></type>
        <label><text>Simon Perreault
2875 boul. Laurier, suite D2-630
Quebec, QC, Canada
G1V 2M2</text></label>
      </parameters>
      <pobox/>
      <ext/>
      <street>2875 boul. Laurier, suite D2-630</street>
      <locality>Quebec</locality>
      <region>QC</region>
      <code>G1V 2M2</code>
      <country>Canada</country>
    </adr>
    <tel>
      <parameters>
        <type><text>work</text><text>voice</text></type>
      </parameters>
      <uri>tel:+1-418-656-9254;ext=102</uri>
    </tel>
    <email>
      <parameters><type><text>work</text></type></parameters>
      <text>simon.perreault@viagenie.ca</text>
    </email>
    <geo>
      <parameters><type><text>work</text></type></parameters>
      <uri>geo:46.766336,-71.28955</uri>
    </geo>
    <tz><text>America/Montreal</text></tz>
    <url>
      <parameters><type><text>home</text></type></parameters>
      <uri>http://nomis80.org</uri>
    </url>
  </vcard>
</vcards>
```

---

## 11. IANA Registrations

### XML Namespace

- **URI**: `urn:ietf:params:xml:ns:vcard-4.0`

### Media Type

- **Type**: application
- **Subtype**: vcard+xml
- **Parameters**: charset (UTF-8 STRONGLY RECOMMENDED)
- **File extension**: .xml

---

## 12. Key Implementation Notes

1. **Root `<vcards>` always required** (even for single vCard)
2. **Property names are lowercase** in xCard
3. **VERSION is implicit** (via namespace)
4. **Empty elements** for missing structured components
5. **Multi-valued parameters** repeat `<text>` elements
6. **Unknown properties** use `<unknown>` value type
7. **Line folding is not needed** in XML
8. **XML Signature/Encryption can be used** for security
