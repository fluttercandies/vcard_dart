# RFC 2739 - Calendar Attributes for vCard and LDAP

> **RFC 2739**: Calendar Attributes for vCard and LDAP  
> **Status**: Proposed Standard (Updated by RFC 6350)  
> **Date**: January 2000  
> **Authors**: T. Small (XpertSite.Com), D. Hennessy (ISOCOR), F. Dawson (Lotus)

## 1. Overview

RFC 2739 defines calendar-related attributes that can be added to vCard (and LDAP) to enable calendar user agents (CUA) to locate:

1. **Calendar URI** - Location to retrieve user's calendar
2. **Free/Busy URI** - Location to retrieve user's busy time data
3. **Calendar Access URI** - Protocol-independent calendar communication endpoint
4. **Calendar Address URI** - Location for sending event requests

## 2. Calendar and Scheduling URIs

### 2.1 FBURL - Free/Busy URI

**Purpose**: Transport-independent location for obtaining busy time information.

**Behavior**:
- HTTP/FTP retrieval returns iCalendar object with `VFREEBUSY` components
- MIME transport returns `text/calendar` body part
- Recommended to publish 6 weeks of busy time data
- Recommended file extension: `.ifb`

**Example iCalendar Response**:
```
BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//hacksw/handcal//NONSGML v1.0//EN
METHOD:PUBLISH
BEGIN:VFREEBUSY
ATTENDEE:MAILTO:jane_doe@host1.com
DTSTART:19971013T050000Z
DTEND:19971124T050000Z
DTSTAMP:19970901T083000Z
FREEBUSY:19971015T133000Z/19971015T180000Z
FREEBUSY:19971015T190000Z/19971015T220000Z
FBURL:http://www.host.com/calendar/busy/jdoe.ifb
END:VFREEBUSY
END:VCALENDAR
```

### 2.2 CAPURI - Calendar Access URI

**Purpose**: Protocol-independent location for communicating with user's entire calendar.

**Note**: The semantics for this URI were to be defined by the IETF CALSCH Working Group in a separate "Calendar Access Protocol" specification.

### 2.3 CALURI - Calendar URI

**Purpose**: Protocol-independent location for retrieving entire copy of user's calendar.

**Behavior**:
- HTTP URI: Returns `text/calendar` MIME body with iCalendar objects
- FTP URI: Points to file with `.ics` extension containing iCalendar objects

### 2.4 CALADRURI - Calendar Address URI

**Purpose**: Location to which event requests should be sent for the user.

**Typical Value**: `mailto:` URI pointing to user's calendar email address.

### 2.5 Default URIs

When a user has multiple calendars, the concept of **"default" calendar** is introduced:
- Designated by user as primary calendar
- May include rolled-up information from other calendars
- Other calendars exist for organizational purposes

## 3. vCard Property Definitions

### 3.1 FBURL Property

| Attribute | Value |
|-----------|-------|
| **Type name** | FBURL |
| **Purpose** | Specify URI for user's busy time in vCard |
| **Encoding** | 8bit |
| **Value type** | Single URI |
| **Special notes** | Default indicated with `PREF` parameter; file extension `.ifb` |

**IANA Registration**: Section 2.3.1

**Examples**:
```
FBURL;PREF:http://www.host1.com/busy/janedoe
FBURL:FTP://ftp.host.com/busy/project-a.ifb
```

### 3.2 CALADRURI Property

| Attribute | Value |
|-----------|-------|
| **Type name** | CALADRURI |
| **Purpose** | Specify location for sending event requests |
| **Encoding** | 8bit |
| **Value type** | Single URI |
| **Special notes** | Default indicated with `PREF` parameter |

**IANA Registration**: Section 2.3.2

**Example**:
```
CALADRURI;PREF:mailto:janedoe@host.com
```

### 3.3 CAPURI Property

| Attribute | Value |
|-----------|-------|
| **Type name** | CAPURI |
| **Purpose** | Specify protocol-independent location for calendar communication |
| **Encoding** | 8bit |
| **Value type** | Single URI |
| **Special notes** | Default indicated with `PREF` parameter |

**IANA Registration**: Section 2.3.3

### 3.4 CALURI Property

| Attribute | Value |
|-----------|-------|
| **Type name** | CALURI |
| **Purpose** | Specify URI for user's calendar in vCard |
| **Encoding** | 8bit |
| **Value type** | Single URI |
| **Special notes** | Default indicated with `PREF` parameter; file extension `.ics` |

**IANA Registration**: Section 2.3.4

**Examples**:
```
CALURI;PREF:http://cal.host1.com/calA
CALURI:ftp://ftp.host1.com/calA.ics
```

## 4. Complete vCard Example

```
BEGIN:VCARD
VERSION:3.0
N:Dun;Alec
FN:Alec Dun
ORG:Microsoft Corporation
ADR;WORK;POSTAL;PARCEL:;;One Microsoft Way;Redmond;WA;98052-6399;USA
TEL;WORK;MSG:+1-206-936-4544
TEL;WORK;FAX:+1-206-936-7329
EMAIL;INTERNET:user@host1.com
CALADRURI;PREF:mailto:user@host1.com
CALURI;PREF:http://cal.host1.com/user/cal.ics
FBURL;PREF:http://cal.host1.com/user/fb.ifb
CALURI:http://cal.company.com/projectA/pjtA.ics
FBURL:http://cal.company.com/projectA/pjtAfb.ifb
END:VCARD
```

## 5. LDAP Schema Extensions

RFC 2739 also defines LDAP schema for directory-based calendar lookup.

### 5.1 Object Class

**calEntry** (OID: 1.2.840.113556.1.5.87):
- Derived from `TOP`
- Type: `AUXILIARY`
- Contains calendar attributes

### 5.2 Attribute Definitions

| Attribute | OID | Description |
|-----------|-----|-------------|
| calCalURI | 1.2.840.113556.1.4.478 | Default calendar URI |
| calFBURL | 1.2.840.113556.1.4.479 | Default free/busy URI |
| calCAPURI | 1.2.840.113556.1.4.480 | Calendar Access Protocol URI |
| calCalAdrURI | 1.2.840.113556.1.4.481 | Calendar address URI |
| calOtherCalURIs | 1.2.840.113556.1.4.482 | Other calendar URIs (multi-value) |
| calOtherFBURLs | 1.2.840.113556.1.4.483 | Other free/busy URIs (multi-value) |
| calOtherCAPURIs | 1.2.840.113556.1.4.484 | Other CAP URIs (multi-value) |
| calOtherCalAdrURIs | 1.2.840.113556.1.4.485 | Other calendar address URIs (multi-value) |

**Common Attribute Properties**:
- Equality: `caseIgnoreMatch`
- Substring: `caseIgnoreMatch`
- Syntax: `IA5String`
- Usage: `userApplications`

## 6. Priority of Information Sources

1. **Directory lookup (LDAP)**: Most up-to-date
2. **vCard**: May be cached/outdated
3. **Manual transfer**: Least reliable

## 7. Security Considerations

1. **LDAP Servers** may permit anonymous refresh of entries
2. **Bind requirement** may be enforced for RefreshRequest
3. **vCard origin** - recipients should verify vCard source
4. **Information currency** - directory data may be outdated (e.g., dynamic IP addresses)

## 8. Relationship to Other Standards

### 8.1 Referenced Standards
- **RFC 2251**: Lightweight Directory Access Protocol (LDAPv3)
- **RFC 2252**: LDAPv3 Attribute Syntax Definitions
- **RFC 2426**: vCard MIME Directory Profile (vCard 3.0)
- **RFC 2445**: iCalendar specification
- **RFC 2447**: iCalendar Message-Based Interoperability Protocol (iMIP)

### 8.2 Updates
- **RFC 6350** (vCard 4.0) updates this specification
- vCard 4.0 directly incorporates calendar properties

## 9. Key Implementation Notes

### 9.1 Property Cardinality
- Multiple instances of each property allowed
- Use `PREF` parameter to indicate default

### 9.2 URI Schemes
- `http://` and `https://` - web-based calendars
- `ftp://` - file-based calendars
- `mailto:` - email-based calendar addresses

### 9.3 File Extensions
- `.ics` - iCalendar files (calendar data)
- `.ifb` - iCalendar free/busy files

### 9.4 vCard 4.0 Equivalents

| RFC 2739 Property | vCard 4.0 Property |
|-------------------|-------------------|
| FBURL | FBURL |
| CALADRURI | CALADRURI |
| CALURI | CALURI |
| CAPURI | (deprecated) |

## 10. Summary

RFC 2739 extends vCard 3.0 with four calendar-related properties:

| Property | Purpose | Example |
|----------|---------|---------|
| FBURL | Free/busy time data | `http://cal.example.com/user/fb.ifb` |
| CALURI | Calendar snapshot | `http://cal.example.com/user/cal.ics` |
| CALADRURI | Event request destination | `mailto:user@example.com` |
| CAPURI | Calendar access protocol | (implementation-specific) |

These properties enable calendar interoperability by providing standardized ways to discover and access calendar information associated with a contact.
