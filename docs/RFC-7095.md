# RFC 7095 - jCard: The JSON Format for vCard

> **Status**: PROPOSED STANDARD  
> **Author**: P. Kewisch (Mozilla)  
> **Date**: January 2014  
> **MIME Type**: `application/vcard+json`

---

## 1. Overview

RFC 7095 defines "jCard", a JSON format for vCard data. It provides a standardized way to represent vCard 4.0 data in JSON format.

### Key Design Goals

- **Round-tripping**: Converting vCard → jCard → vCard preserves all semantic data
- **Ordering/case not preserved**: Property order and name case may change
- **Semantic preservation**: vCard data semantics are maintained
- **Extension friendly**: New vCard extensions work without jCard updates

---

## 2. jCard Object Structure

### Basic Structure

```json
["vcard", [
    ["property-name", {parameters}, "type-identifier", value(s)]
]]
```

### Top-Level Array

- First element: string `"vcard"` (lowercase)
- Second element: array of properties

### Property Array

Each property is an array with:
1. **Property name** (lowercase string)
2. **Parameters object** (empty `{}` if none)
3. **Type identifier** (lowercase string)
4. **Value(s)** (one or more)

---

## 3. Property Representation

### Single-Value Property

```json
["fn", {}, "text", "John Doe"]
```

### Multi-Value Property

```json
["categories", {}, "text", "computers", "cameras"]
```

### Property with Parameters

```json
["tel", {"type": ["work", "voice"], "pref": "1"}, "uri", "tel:+1-555-1234"]
```

---

## 4. Pre-processing Rules

### Converting vCard to jCard

1. **Unfold lines** (remove CRLF + whitespace)
2. **Unescape vCard escaping** (\\, \n, \,)
3. **Apply JSON escaping** (for control characters)

### Converting jCard to vCard

1. **Unescape JSON**
2. **Apply vCard escaping**
3. **Fold long lines** (SHOULD fold at 75 characters)

---

## 5. Special Cases for Properties

### 5.1 VERSION Property

- **MUST** be present in jCard
- **MUST** be the first property
- Value is typically `"4.0"` for RFC 6350 vCards

```json
["version", {}, "text", "4.0"]
```

### 5.2 BEGIN/END Properties

- **MUST NOT** appear in jCard
- The jCard array structure replaces BEGIN/END markers
- When converting to vCard, BEGIN/END MUST be added

### 5.3 Property Grouping

vCard grouping syntax:
```
CONTACT.FN:Mr. John Q. Public, Esq.
```

jCard equivalent (uses `group` parameter):
```json
["fn", {"group": "contact"}, "text", "Mr. John Q. Public, Esq."]
```

**Conversion Rules**:
- vCard → jCard: Remove group prefix, add `group` parameter (lowercase SHOULD)
- jCard → vCard: Prefix property name with group value + dot, remove parameter

---

## 6. Structured Property Values

### Simple Structured Value (N Property)

vCard:
```
N:Perreault;Simon;;;ing. jr,M.Sc.
```

jCard:
```json
["n", {}, "text", ["Perreault", "Simon", "", "", ["ing. jr", "M.Sc."]]]
```

### ADR Property (7 Components)

vCard:
```
ADR:;;123 Main Street;Any Town;CA;91921-1234;U.S.A.
```

jCard:
```json
["adr", {}, "text", ["", "", "123 Main Street", "Any Town", "CA", "91921-1234", "U.S.A."]]
```

### Multi-Value Component

vCard:
```
ADR:;;My Street,Left Side,Second Shack;Hometown;PA;18252;U.S.A.
```

jCard:
```json
["adr", {}, "text", [
    "", "",
    ["My Street", "Left Side", "Second Shack"],
    "Hometown", "PA", "18252", "U.S.A."
]]
```

### GENDER Property

Simple:
```json
["gender", {}, "text", "M"]
```

With identity:
```json
["gender", {}, "text", ["F", "grrrl"]]
```

---

## 7. Parameters

### Basic Parameter Object

```json
{"language": "tr", "type": "work"}
```

### Multi-Valued Parameters

- MUST be represented as arrays
- Single-value parameters SHOULD be strings

```json
{"sort-as": ["Harten", "Rene"], "type": ["work", "voice"]}
```

### VALUE Parameter

- **MUST NOT** appear in parameters object
- Type is conveyed through the type identifier (3rd element)
- When converting to vCard:
  - Omit VALUE if matches default type
  - Include VALUE if not default type
  - Omit VALUE if type is "unknown"

### Case Sensitivity

- Parameter names: **lowercase** in jCard
- Parameter values: **preserve original case**

---

## 8. Value Types

### 8.1 Text (`text`)

```json
["kind", {}, "text", "group"]
```

### 8.2 URI (`uri`)

```json
["source", {}, "uri", "ldap://ldap.example.com/cn=babs%20jensen"]
```

### 8.3 Date (`date`)

Uses ISO 8601 **extended format** (with hyphens):

| vCard (basic) | jCard (extended) |
|---------------|------------------|
| 19850412 | 1985-04-12 |
| 1985-04 | 1985-04 |
| 1985 | 1985 |
| --0412 | --04-12 |
| --04 | --04 |
| ---12 | ---12 |

```json
["bday", {}, "date", "1985-04-12"]
["bday", {}, "date", "--04-12"]
```

### 8.4 Time (`time`)

Uses ISO 8601 **extended format** (with colons):

| vCard (basic) | jCard (extended) |
|---------------|------------------|
| 232050 | 23:20:50 |
| 2320 | 23:20 |
| 23 | 23 |
| -2050 | -20:50 |
| -20 | -20 |
| --50 | --50 |

```json
["x-time-local", {}, "time", "12:30:00"]
["x-time-utc", {}, "time", "12:30:00Z"]
["x-time-offset", {}, "time", "12:30:00-08:00"]
```

### 8.5 Date-Time (`date-time`)

Combination of date and time with "T" separator:

| vCard | jCard |
|-------|-------|
| 19850412T232050 | 1985-04-12T23:20:50 |
| 19850412T232050Z | 1985-04-12T23:20:50Z |
| 19850412T232050+0400 | 1985-04-12T23:20:50+04:00 |
| --0412T2320 | --04-12T23:20 |

```json
["anniversary", {}, "date-time", "2013-02-14T12:30:00"]
["anniversary", {}, "date-time", "2013-01-10T19:00:00Z"]
```

### 8.6 Date and/or Time (`date-and-or-time`)

Can be date, time, or date-time. Stand-alone time MUST have "T" prefix:

```json
["bday", {}, "date-and-or-time", "2013-02-14T12:30:00"]
["bday", {}, "date-and-or-time", "1985"]
["bday", {}, "date-and-or-time", "T12:30"]
```

### 8.7 Timestamp (`timestamp`)

Full date-time with required timezone:

```json
["rev", {}, "timestamp", "2013-02-14T12:30:00Z"]
["rev", {}, "timestamp", "2013-02-14T12:30:00-05:00"]
```

### 8.8 Boolean (`boolean`)

Uses JSON boolean (not string):

```json
["x-non-smoking", {}, "boolean", true]
```

### 8.9 Integer (`integer`)

Uses JSON number:

```json
["x-karma-points", {}, "integer", 42]
```

### 8.10 Float (`float`)

Uses JSON number:

```json
["x-grade", {}, "float", 1.3]
```

### 8.11 UTC Offset (`utc-offset`)

With colon separator:

```json
["tz", {}, "utc-offset", "-05:00"]
```

### 8.12 Language Tag (`language-tag`)

```json
["lang", {}, "language-tag", "de"]
```

---

## 9. Unknown/Extension Handling

### Unknown Type (`unknown`)

For properties with unknown default value types:

```json
["x-complaint-uri", {}, "unknown", "mailto:abuse@example.org"]
```

**Rules**:
- Use when default value type is not known
- Value is unprocessed text
- When converting to vCard: NO VALUE parameter added

### Extension Properties

Same format as standard properties:

```json
["x-custom-prop", {"x-custom-param": "value"}, "text", "custom value"]
```

---

## 10. ABNF Syntax

```abnf
jcardobject = begin-array
              DQUOTE "vcard" DQUOTE value-separator
              properties-array
              end-array

property = begin-array
           DQUOTE property-name DQUOTE value-separator
           params-object value-separator
           DQUOTE type-name DQUOTE
           property-value *(value-separator property-value)
           end-array

properties-array = begin-array
                   [ property *(value-separator property) ]
                   end-array

params-object = begin-object
                [ params-member *(value-separator params-member) ]
                end-object

params-member = DQUOTE param-name DQUOTE name-separator param-value

param-value = string / param-multi

param-multi = begin-array
              [ string *(value-separator string) ]
              end-array

type-name = "text" / "uri" / "date" / "time" / "date-time" /
            "boolean" / "integer" / "float" / "utc-offset" /
            "language-tag" / x-type

property-name = lowercase-name
param-name = lowercase-name
lowercase-name = 1*(%x61-7A / DIGIT / "-")
```

---

## 11. Complete Example

### vCard Format

```
BEGIN:VCARD
VERSION:4.0
FN:Simon Perreault
N:Perreault;Simon;;;ing. jr,M.Sc.
BDAY:--0203
ANNIVERSARY:20090808T1430-0500
GENDER:M
LANG;PREF=1:fr
LANG;PREF=2:en
ORG;TYPE=work:Viagenie
ADR;TYPE=work:;Suite D2-630;2875 Laurier;
 Quebec;QC;G1V 2M2;Canada
TEL;VALUE=uri;TYPE="work,voice";PREF=1:tel:+1-418-656-9254;ext=102
EMAIL;TYPE=work:simon.perreault@viagenie.ca
GEO;TYPE=work:geo:46.772673,-71.282945
TZ:-0500
URL;TYPE=home:http://nomis80.org
END:VCARD
```

### jCard Format

```json
["vcard",
  [
    ["version", {}, "text", "4.0"],
    ["fn", {}, "text", "Simon Perreault"],
    ["n", {}, "text", ["Perreault", "Simon", "", "", ["ing. jr", "M.Sc."]]],
    ["bday", {}, "date-and-or-time", "--02-03"],
    ["anniversary", {}, "date-and-or-time", "2009-08-08T14:30:00-05:00"],
    ["gender", {}, "text", "M"],
    ["lang", {"pref": "1"}, "language-tag", "fr"],
    ["lang", {"pref": "2"}, "language-tag", "en"],
    ["org", {"type": "work"}, "text", "Viagenie"],
    ["adr", {"type": "work"}, "text",
      ["", "Suite D2-630", "2875 Laurier", "Quebec", "QC", "G1V 2M2", "Canada"]
    ],
    ["tel", {"type": ["work", "voice"], "pref": "1"}, "uri",
      "tel:+1-418-656-9254;ext=102"
    ],
    ["email", {"type": "work"}, "text", "simon.perreault@viagenie.ca"],
    ["geo", {"type": "work"}, "uri", "geo:46.772673,-71.282945"],
    ["tz", {}, "utc-offset", "-05:00"],
    ["url", {"type": "home"}, "uri", "http://nomis80.org"]
  ]
]
```

---

## 12. IANA Registrations

### Media Type

- **Type name**: application
- **Subtype name**: vcard+json
- **Required parameters**: none
- **Optional parameters**: "version"

### Reserved Parameters

- **GROUP**: Reserved for jCard use, MUST NOT appear in plain vCard

### Reserved Value Types

- **UNKNOWN**: Reserved for jCard, MUST NOT appear in vCard

---

## 13. Key Implementation Notes

1. **Property names MUST be lowercase** in jCard
2. **Parameter names MUST be lowercase** in jCard
3. **Parameter values preserve original case**
4. **VERSION MUST be first property**
5. **BEGIN/END are implicit** (represented by array structure)
6. **DATE/TIME use extended ISO 8601 format** (with separators)
7. **Multi-valued parameters MUST use arrays**
8. **Empty structured components use empty strings**
9. **Grouping uses `group` parameter** instead of prefix
10. **VALUE parameter is replaced by type identifier**
